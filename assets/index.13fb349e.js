(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function c(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=c(r);fetch(r.href,n)}})();const E=()=>{};const _=async e=>{if(!e)throw new Error("ID n\xE3o informado");const t=`https://api.mercadolibre.com/items/${e}`;return await(await fetch(t)).json()},L=async e=>{if(!e)throw new Error("Termo de busca n\xE3o informado");const t=`https://api.mercadolibre.com/sites/MLB/search?q=${e}`;return(await(await fetch(t)).json()).results},f=()=>{const e=localStorage.getItem("cartProducts");return e?JSON.parse(e):[]},w=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um ID");const c=[...f(),e];localStorage.setItem("cartProducts",JSON.stringify(c))},I=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um ID");const t=[...f()],c=t.indexOf(e);t.splice(c,1),localStorage.setItem("cartProducts",JSON.stringify(t))},P=".total-price",N=e=>{let t=parseFloat(document.querySelector(P).innerHTML);return t+=e,t.toFixed(2)},q=()=>{const e=document.querySelector(P).innerHTML;return parseFloat(e)},C=e=>{localStorage.setItem("actualPrice",JSON.stringify(e))},O=()=>{const e=localStorage.getItem("actualPrice");return e?JSON.parse(e):0},M=document.querySelector(".cart__products"),y=document.querySelector(".total-price"),m=e=>{const t=document.createElement("img");return t.className="product__image",t.src=e.replace("I.jpg","O.jpg"),t},a=(e,t,c="")=>{const o=document.createElement(e);return o.className=t,o.innerText=c,o},T=(e,t)=>{e.remove(),I(t)},S=({id:e,title:t,price:c,pictures:o})=>{const r=document.createElement("li");r.className="cart__product";const n=a("div","cart__product__image-container"),s=m(o[0].url);n.appendChild(s);const d=m((o[1]||o[0]).url);n.appendChild(d),r.appendChild(n);const i=a("div","cart__product__info-container");i.appendChild(a("span","product__title",t));const l=a("span","product__price","R$ ");l.appendChild(a("span","product__price__value",c)),i.appendChild(l),r.appendChild(i);const u=a("i","material-icons cart__product__remove","delete");return r.appendChild(u),r.addEventListener("click",()=>{T(r,e);const v=c,g=q()-v;y.innerHTML=g.toFixed(2),C(g.toFixed(2))}),r},b=({id:e,title:t,thumbnail:c,price:o})=>{const r=document.createElement("section");r.className="product",r.appendChild(a("span","product__id",e));const n=a("div","img__container");n.appendChild(m(c)),r.appendChild(n),r.appendChild(a("span","product__title",t));const s=a("span","product__price","R$ ");s.appendChild(a("span","product__price__value",o)),r.appendChild(s);const d=a("button","product__add","Adicionar ao carrinho!");return d.addEventListener("click",async()=>{w(e);const i=await _(e),l=S(i);M.appendChild(l);const u=N(o);y.innerHTML=u,C(u)}),r.appendChild(d),r};document.querySelector(".cep-button").addEventListener("click",E);const p=document.querySelector(".products"),h=e=>{const t=document.createElement("p");t.className="loading",t.innerHTML=e,p.appendChild(t)};async function H(){try{h("carregando...");const e=await L("computador");p.innerHTML="",e.forEach(t=>{const c=b(t);p.appendChild(c)})}catch{p.innerHTML="",h("Algum erro ocorreu, recarregue a p\xE1gina e tente novamente"),document.querySelector(".loading").className="error"}}async function x(){const e=f(),t=await Promise.all(e.map(o=>_(o))),c=document.querySelector(".cart__products");t.forEach(o=>c.appendChild(S(o)))}function D(){const e=O();document.querySelector(".total-price").innerHTML=e}window.onload=function(){H(),x(),D()};
